# 講返啲地道嘢 · Can‑Tong

這個項目是一個開源的中文/英文翻譯粵語網站雛形，旨在守護和傳承粵語文化。它允許用戶輸入普通話或英文句子，返回對應的粵語正字、粵拼（Jyutping），並附帶表情符號（emoji）及情感標註。無論是預先錄製的發音還是貢獻者提供的錄音，均可播放。與以往的「解鎖模式」不同，本項目不設 VIP 機制——所有功能對每個人開放。項目鼓勵眾包擴充詞庫和錄音，讓更多母語者和學習者參與，並透過後端數據庫持續收集語料來訓練 AI 理解粵語的用法與情感。

## 功能

* **即時翻譯與情感標註** – 依據本地詞庫 (`data/lexicon.json`) 將輸入的中文或英文句子映射為粵語正字、粵拼，並返回對應的表情符號與情感描述。例如輸入「這麼奇怪」會翻譯為「咁奇嘅」，並附帶 🤔 表示疑惑的情緒。
* **發音播放** – 優先播放 `public/audio` 目錄中對應的 mp3 錄音（可由開發者或貢獻者提供）；若沒有錄音則使用瀏覽器內建的粵語語音合成（zh‑HK）。所有詞條的發音默認可用，無任何解鎖限制。
* **詞庫眾包與學習** – 頁面會隨機列出 5 條短語，鼓勵使用者填寫粵語正字、粵拼、情感描述和表情符號，必要時可添加備註。提交的詞條會保存在本地並可導出為 JSON，由維護者合併進公共詞庫和錄音映射。本項目著重於擴充語料和探索粵語情感表達，不設 VIP 功能，參與者的貢獻旨在守護語言而非獲取權益。
* **後端數據儲存與 AI 訓練** – 為了讓翻譯器具有「學習能力」，項目預留了 `backend/` 目錄，用於實現與資料庫的連接，例如 SQLite、PostgreSQL 或雲端服務。長期目標是將收集到的詞條、發音和情緒標註存入數據庫，結合機器學習模型分析並生成更準確、富含情感的粵語翻譯。
* **收藏與數據導出** – 使用者可以收藏常用翻譯，也可導出自己的貢獻記錄。導出的 JSON 包含所填的粵語正字、粵拼、表情符號、情感描述以及錄音映射，便於提交至 GitHub 或後端數據庫。

## 結構

```
can-tong
├── public/
│   └── audio/            # 錄音文件
├── data/
│   ├── lexicon.json       # 詞庫：意圖列表、粵語正字、粵拼
│   └── devAudioMap.json   # 粵語正字到錄音檔名的映射
├── src/
│   ├── App.tsx            # 主界面邏輯
│   └── main.tsx           # React 入口
├── index.html             # 頁面入口
├── package.json           # 項目配置
└── vite.config.ts         # Vite 配置
```

## 開發與運行

1. 確保已安裝 [Node.js](https://nodejs.org/) 和 [pnpm](https://pnpm.io/)（或 npm/yarn）。
2. 在命令行中執行：

```bash
pnpm install
pnpm dev
```

3. 打開瀏覽器訪問 `http://localhost:5173` 以查看本項目。

4. 如需打包生產版：

```bash
pnpm build
```

5. 如果您使用在線 IDE（如 StackBlitz），則不需要運行以上命令；您只需打開本倉庫並編輯文件即可。

## 貢獻指南

1. **詞庫擴充** – 在 `data/lexicon.json` 中新增或修改詞條。每個詞條是一個對象，至少包含以下欄位：
   * `id` – 唯一標識符；採用便於查找的英文或拼音命名，例如 `so_weird`。
   * `intents` – 中文或英文原句、關鍵詞列表，用於匹配輸入。
   * `yue` – 對應的粵語正字。
   * `jyut` – 對應的粵拼（Jyutping）。
   * `emoji` – 對應情緒的表情符號，例如 😊、😢、🤔 等。
   * `emotion` – 對應情緒的文字描述，如「高興」「難過」「疑惑」等。
   * `note` – （可選）備註說明，例如使用場景或來源。
   以下是新增詞條的範例：
   ```json
   {
     "id": "so_weird",
     "intents": ["這麼奇怪", "这么奇怪", "so weird"],
     "yue": "咁奇嘅",
     "jyut": "gam3 kei4 ge3",
     "emoji": "🤔",
     "emotion": "疑惑"
   }
   ```
2. **錄音映射** – 在 `data/devAudioMap.json` 中新增條目的錄音映射，例如：
   ```json
   {
     "咁奇嘅": "gam3-kei4-ge3.mp3"
   }
   ```
   錄音應以 mp3 格式放置於 `public/audio/` 目錄，文件名需與映射中一致。貢獻者可以錄製自己的粵語發音來豐富數據庫。請確保錄音清晰，無噪音。
3. **貢獻提交流程** – 提交 Pull Request 前，請先從主倉庫拉取最新代碼，避免合併衝突。新增或修改詞條及錄音映射後，在 PR 中簡要說明所做更改（例如「新增翻譯“這麼奇怪”及對應情感」）。維護者將審核內容，確保粵語用字及情感描述正確，然後合併。
4. **後端數據儲存** – 為了持續收集和研究語料，本項目設計了一個簡單的後端資料夾（如 `backend/`，未來可以用 SQLite、lowdb 或任何簡易資料庫實現）。當前版本僅在瀏覽器本地保存任務貢獻並導出 JSON；未來可將這些 JSON 整合到後端資料庫供模型訓練。
