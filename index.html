<!doctype html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Can‑Tong 粤语助手 · 演示/云端双模</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <header class="top">
    <div class="brand">Can‑Tong 粤语助手</div>
    <div id="mode" class="mode">演示模式（本地规则） · <span id="cloudState" class="muted">云端：未连接</span></div>
  </header>

  <main class="chatwrap">
    <div id="chat" class="chat">
      <div class="msg sys">
        <div class="bubble">
          👋 歡迎！輸入中文/英文/粵語，我會輸出「粵語正字（繁體，港式）」的多個可用說法。<br>
          <span class="muted">備註：風格僅作灰色說明，非固定三擋；連接雲端模型後效果更地道。</span>
        </div>
      </div>
    </div>

    <div class="composer">
      <button id="btnCfg" class="icon" title="设置">⚙️</button>
      <textarea id="ipt" rows="1" placeholder="輸入訊息，按 Enter 發送（Shift+Enter 換行）"></textarea>
      <button id="btnSend">发送</button>
    </div>
  </main>

  <dialog id="cfgDialog">
    <form method="dialog" class="cfg">
      <h3>云端模型连接（OpenAI 兼容 / vLLM 网关 / Ollama）</h3>
      <label>API Base
        <input id="apiBase" placeholder="例如：https://api.openai.com/v1 或 http://localhost:11434/v1">
      </label>
      <label>API Key
        <input id="apiKey" placeholder="sk-...（Ollama 一般留空）">
      </label>
      <label>模型名
        <input id="model" placeholder="例如：gpt-4o-mini / qwen2.5-7b-instruct / llama3.1">
      </label>
      <label>单次超时（秒）
        <input id="timeout" type="number" value="40">
      </label>
      <div class="row">
        <button id="btnTest" type="button" class="ghost">测试连接</button>
        <button id="btnSave" type="button">保存</button>
        <button id="btnClose" type="submit" class="ghost">关闭</button>
      </div>
      <p class="muted tiny">
        说明：三类接口都是 <b>Chat Completions</b> 规范，只是服务来源不同：<br>
        <b>OpenAI</b>（付费，最稳）· <b>vLLM/自建网关</b>（自托管，低成本）· <b>Ollama</b>（本地离线）。<br>
        你只需填 API Base/模型名/Key（如需），无需改代码即可切换。
      </p>
    </form>
  </dialog>

  <footer class="foot muted tiny">
    © Can‑Tong · 演示/云端双模 · 支持灰色风格备注，非固定三挡 · 后续可接 RAG / zh‑HK TTS
  </footer>

  <script src="./app.js" defer></script>
</body>
</html>
